class Device{constructor(e){this.id=e.id,this.position=[],this.name=e.name,this.connected="disconnected",this.coords={lat:null,lng:null,readable:null},this.properties=this.getProperties(e),this.getGPSData()}getProperties(e){if(e&&e.state&&e.state.reported){var t=!!e.state.reported.connected,s=e.state.reported.connection&&"connected"===e.state.reported.connection.status;(t||s)&&(this.connected="connected")}return{name:this.name,connected:this.connected}}getGPSData(){var e=getAjaxSettings("https://api.nrfcloud.com/v1/messages?inclusiveStart=2018-06-18T19%3A19%3A45.902Z&exclusiveEnd=3000-06-20T19%3A19%3A45.902Z&deviceIdentifiers="+this.id+"&pageLimit=1&pageSort=desc&appId=GPS",!1),t=this;$.ajax(e).done(function(e){if(e&&e.items&&e.items[0]&&e.items[0].message&&e.items[0].message.data){var s=e.items[0].message.data.split(","),i=parseFloat(s[2].substr(s[2].indexOf(".")-2))/60+parseFloat(s[2].substr(0,s[2].indexOf(".")-2)),a=i*("N"==s[3]?1:-1),n=i.toFixed(3),o=(parseFloat(s[4].substr(s[4].indexOf(".")-2))/60+parseFloat(s[4].substr(0,s[4].indexOf(".")-2)))*("E"==s[5]?1:-1),r=o.toFixed(3),d=n+"° "+s[3]+", "+r+"° "+s[5];t.coords.readable=d,t.coords.lat=a,t.coords.lng=o,t.position=[a,o],t.gps=t.coords}return t})}}