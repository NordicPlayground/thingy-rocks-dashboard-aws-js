class Globe{constructor(e){var i=new Sidebar,t=this.initViewer();this.configScene(t),this.initControls();this.addPoints(t,e,i),this.clickAction(t,i)}configScene(e){e.scene.screenSpaceCameraController.enableTilt=!1,document.querySelector("#zoom-out").addEventListener("click",(function(){var i=e.scene.globe.ellipsoid.cartesianToCartographic(e.camera.position).height,t=i<3e5?i/15:i/5;console.log(i),e.camera.moveBackward(t)})),document.querySelector("#zoom-in").addEventListener("click",(function(){var i=e.scene.globe.ellipsoid.cartesianToCartographic(e.camera.position).height,t=i<3e5?i/15:i/5;console.log(i),e.camera.moveForward(t)}))}initViewer(){var e=Cesium.createDefaultImageryProviderViewModels();return new Cesium.Viewer("cesiumContainer",{imageryProviderViewModels:e,selectedImageryProviderViewModel:e[1]})}initControls(){}addPoints(e,i,t){var o=document.querySelector(".device-list");if(Object.keys(i).length>1)for(const a in i)console.log(typeof i[a]),this.addPoint(e,i[a],o,t)}addPoint(e,i,t,o){console.log(i.position);let a=null!=i.properties.coords;console.log("DDDDD:"+i.properties.coords);let r=this.createListEntry(e,i,t),l=e.entities.add({position:Cesium.Cartesian3.fromDegrees(i.position[1],i.position[0]),properties:{name:i.properties.name,coords:i.properties.coords,list_entry:r,data:i.properties.data},billboard:{rotation:0,image:"assets/img/nordic-icon-b.svg",show:a}});r.addEventListener("click",(function(){e.selectedEntity=l,window.innerWidth<771&&o.closeSidebar()}))}createListEntry(e,i,t){let o=document.createElement("li");return o.innerHTML='<a href="#">'+i.properties.name+"</a>",t.appendChild(o),o}clickAction(e,i){e.selectedEntityChanged.addEventListener((function(){if(console.log(e),Globe.resetIcons(e),void 0!==e.selectedEntity){console.log(e.selectedEntity),Globe.populateSidebar(e.selectedEntity),Globe.populateMobileData(e.selectedEntity),e.selectedEntity.billboard.image="assets/img/nordic-icon-y.svg";var t=e.selectedEntity._properties._list_entry._value;void 0!==t&&(null!==document.querySelector(".device-list li.active")&&document.querySelector(".device-list li.active").classList.remove("active"),t.classList.add("active")),console.log(e.selectedEntity._position._value),e.flyTo(e.selectedEntity,{offset:new Cesium.HeadingPitchRange(0,-90,5e3)}),window.innerWidth>770?i.openSidebar():document.querySelector(".mobile-sidebar").classList.add("reveal")}else i.closeSidebar(),i.closeMobileSidebar()}))}static populateSidebar(e){var i=e._properties,t=document.querySelector(".data-display"),o=t.querySelector(".device-location-name-label"),a=t.querySelector(".coordinates"),r=t.querySelector(".device-data");if(o.innerHTML=i._name,a.innerHTML=null==i._coords._value?"No GPS Data Available":i._coords,void 0!==i._data._value){for(;document.querySelector(".device-data").firstChild;)r.removeChild(document.querySelector(".device-data").firstChild);console.log(i._data._value);for(const e in i._data._value){var l=new DeviceDatum(e,i._data._value[e]).returnNode();r.appendChild(l)}}}static populateMobileData(e){var i=e._properties,t=document.querySelector(".mobile-sidebar .data-display"),o=t.querySelector(".device-location-name-label"),a=t.querySelector(".coordinates"),r=t.querySelector(".mobile-sidebar .device-data");if(o.innerHTML=i._name,a.innerHTML=null==i._coords._value?"No GPS Data Available":i._coords,void 0!==i._data._value){for(;document.querySelector(".mobile-sidebar .device-data").firstChild;)r.removeChild(document.querySelector(".mobile-sidebar .device-data").firstChild);console.log(i._data._value);for(const e in i._data._value){var l=new DeviceDatum(e,i._data._value[e]).returnNode();r.appendChild(l)}}}static resetIcons(e){console.log("resetIcons running");var i=e.entities._entities._array;if(console.log(i),void 0!==e.selectedEntity)for(let e=0;e<i.length;e++)void 0!==i[e]._billboard._image&&(i[e].billboard.image="assets/img/nordic-icon-b.svg")}}