class Globe{constructor(e){var t=new Sidebar,i=this.initViewer();this.configScene(i),this.initControls();this.addPoints(i,e,t),this.clickAction(i,t)}configScene(e){}initViewer(){return new Cesium.Viewer("cesiumContainer",{animation:!0,timeline:!1,selectionIndicator:!0,requestRenderMode:!0})}initControls(){return new Cesium.CesiumWidget("toolbar",{scene3DOnly:!0,requestRenderMode:!0})}addPoints(e,t,i){var o=document.querySelector(".device-list");if(Object.keys(t).length>1)for(const a in t)console.log(typeof t[a]),this.addPoint(e,t[a],o,i)}addPoint(e,t,i,o){console.log(t.position);let a=this.createListEntry(e,t,i),n=e.entities.add({position:Cesium.Cartesian3.fromDegrees(t.position[1],t.position[0]),properties:{name:t.properties.name,coords:t.properties.coords,list_entry:a,data:t.properties.data},box:{dimensions:new Cesium.Cartesian3(1e4,1e4,0)},billboard:{rotation:0,image:"assets/img/nordic-icon-b.svg"}});a.addEventListener("click",(function(){e.selectedEntity=n,window.innerWidth<771&&o.closeSidebar()}))}createListEntry(e,t,i){let o=document.createElement("li");return o.innerHTML='<a href="#">'+t.properties.name+"</a>",i.appendChild(o),o}clickAction(e,t){e.selectedEntityChanged.addEventListener((function(){if(console.log(e.entities),Globe.resetIcons(e),void 0!==e.selectedEntity){console.log(e.selectedEntity),Globe.populateSidebar(e.selectedEntity),Globe.populateMobileData(e.selectedEntity),e.selectedEntity.billboard.image="assets/img/nordic-icon-y.svg";var i=e.selectedEntity._properties._list_entry._value;void 0!==i&&(null!==document.querySelector(".device-list li.active")&&document.querySelector(".device-list li.active").classList.remove("active"),i.classList.add("active")),console.log(e.selectedEntity._position._value),e.flyTo(e.selectedEntity),window.innerWidth>770?t.openSidebar():document.querySelector(".mobile-sidebar").classList.add("reveal")}else t.closeSidebar()}))}static populateSidebar(e){var t=e._properties,i=document.querySelector(".data-display"),o=i.querySelector(".device-location-name-label"),a=i.querySelector(".coordinates"),n=i.querySelector(".device-data");if(o.innerHTML=t._name,a.innerHTML=null==t._coords._value?"No GPS Data Available":t._coords,void 0!==t._data._value){for(;document.querySelector(".device-data").firstChild;)n.removeChild(document.querySelector(".device-data").firstChild);console.log(t._data._value);for(const e in t._data._value){var r=new DeviceDatum(e,t._data._value[e]).returnNode();n.appendChild(r)}}}static populateMobileData(e){var t=e._properties,i=document.querySelector(".mobile-sidebar .data-display"),o=i.querySelector(".device-location-name-label"),a=i.querySelector(".coordinates"),n=i.querySelector(".mobile-sidebar .device-data");if(o.innerHTML=t._name,a.innerHTML=null==t._coords._value?"No GPS Data Available":t._coords,void 0!==t._data._value){for(;document.querySelector(".mobile-sidebar .device-data").firstChild;)n.removeChild(document.querySelector(".mobile-sidebar .device-data").firstChild);console.log(t._data._value);for(const e in t._data._value){var r=new DeviceDatum(e,t._data._value[e]).returnNode();n.appendChild(r)}}}static resetIcons(e){console.log("resetIcons running");var t=e.entities._entities._array;if(console.log(t),void 0!==e.selectedEntity)for(let e=0;e<t.length;e++)void 0!==t[e]._billboard._image&&(t[e].billboard.image="assets/img/nordic-icon-b.svg")}}